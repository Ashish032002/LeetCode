Example DRL: package com.cams.core.rules.units; unit PKGDuplicateAmcUnit; import com.cams.core.api.requests.RuleEngineRequest; import com.cams.core.domain.ConsolidatedDailyTrades; import com.cams.core.rules.utils.RuleUnitUtils; function boolean amcReferenceExists(RuleEngineRequest request) { if (request == null || request.getConsolidatedDailyTrades() == null || RuleUnitUtils.isNullOrEmpty(request.getConsolidatedDailyTrades().getAmcRefNo())) { return false; } return true; } rule "Duplicate Transaction Check (AMC Reference Number)" when $request: /ruleEngineRequest[ consolidatedDailyTrades != null && !RuleUnitUtils.isNullOrEmpty(consolidatedDailyTrades.amcRefNo), !( "S".equals(consolidatedDailyTrades.getTransactionType()) && "INVESTRAK".equals(context.transactionSource.source) ), !( context.transactionSource.source != null && context.transactionSource.source.matches(".*-Edit") ), eval(amcReferenceExists($request)) ] then $request.getErrorDetails().addErrorForCode("650000"); end

Example Unit file: @Component @Data @SuppressWarnings({"rawtypes"}) public class PKGDuplicateAmcUnit implements RuleUnitData, RuleUnitDomain { private final SingletonStore<RuleEngineRequest> ruleEngineRequest = DataSource.createSingleton(); public PKGDuplicateAmcUnit() { RuleUnitDomain.super.validate(getDomainsUsed()); } public List<Class> getDomainsUsed() { return List.of( ConsolidatedDailyTrades.class, TransactionSource.class ); } @Override public List<TransactionType> getSupportedTransactionTypes() { return List.of( TransactionType.PURCHASE, TransactionType.SWITCH, TransactionType.REDEMPTION ); } }

Follow some methods: As rule i have given have very complex calculated fields i just want to write it's drl file in the simplest way possible only write for rule don't define any function in drl for anything just in the rule if something is coming from input. assume that it is context.(the variable mentioned) and rest analyze variable assignment and fields in rule that coming from variable assignment just put in the way like first name of file or table it is coming from as mentioned in variable assingment.name of the field for example: trxn_db_cr FROM transaction_types should be transaction_types.trxndbcr . And also analyze all the fields and at last give me there parent tables and field name matching so i know in which file i have to put all those calculated fields or fields that are coming from variable assingment
